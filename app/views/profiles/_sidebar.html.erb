<%
   submit = local_assigns.fetch( :submit, true )
   sections = {
       scope: 'Scope <small>&mdash; Rules about which resources to include</small>',
       audit: 'Audit <small>&mdash; Fuzzing settings</small>',
       checks: 'Checks <small>&mdash; Security checks</small>',
       plugins: 'Plugins <small>&mdash; Extra functionality</small>'
    }
%>

<% if submit %>
    <button class="btn btn-primary mb-2"
            onclick="$('.profile-form').submit()">

        <%= @profile.id ? 'Update' : 'Create' %>
    </button>
<% else %>
    <div class="row mb-2">
        <div class="col-auto">
            <%= render 'actions', profile: @profile %>
        </div>
    </div>
<% end %>

<hr/>

<ul id="scrollspy-container" class="nav nav-pills">
    <li class="nav-item">
        <a href="#top" class="nav-link scroll">
            <i class="fa fa-chevron-up"></i>
            Top
        </a>
    </li>
    <% sections.each do |id, title| %>
        <li class="nav-item" style="width: 100%">
            <a href="#<%= id.to_s %>" class="nav-link scroll">
                <%= title.to_s.html_safe %>
            </a>
        </li>
    <% end %>
</ul>

<hr/>

<%= render partial: 'shared/sidebar_scans',
           locals: {
                   scans:      @scans,
                   with_site:  true,
                   with_count: true,
                   scan_details_options: {
                       hide_scan_name: true
                   }
           } %>
